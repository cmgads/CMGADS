public class Test {public void testRegisterMultipleClusterListener() { reset(); MockClusterListener clusterListener1 = new MockClusterListener(); _state.registerClusterListener(clusterListener1); MockClusterListener clusterListener2 = new MockClusterListener(); _state.registerClusterListener(clusterListener2); _state.listenToCluster(CLUSTER1_CLUSTER_NAME, new NullStateListenerCallback()); _state.listenToCluster(CLUSTER2_CLUSTER_NAME, new NullStateListenerCallback()); _clusterRegistry.put(CLUSTER1_CLUSTER_NAME, new ClusterProperties(CLUSTER1_CLUSTER_NAME)); _clusterRegistry.put(CLUSTER2_CLUSTER_NAME, new ClusterProperties(CLUSTER2_CLUSTER_NAME)); _clusterRegistry.put(CLUSTER2_CLUSTER_NAME, new ClusterProperties(CLUSTER2_CLUSTER_NAME)); assertEquals(clusterListener1.getClusterAddedCount(CLUSTER1_CLUSTER_NAME), 1, "expected 1 call for cluster1"); assertEquals(clusterListener2.getClusterAddedCount(CLUSTER2_CLUSTER_NAME), 2, "expected 2 call for cluster2"); assertEquals(clusterListener1.getClusterAddedCount(CLUSTER2_CLUSTER_NAME), 2, "expected 1 call for cluster2"); assertEquals(clusterListener2.getClusterAddedCount(CLUSTER1_CLUSTER_NAME), 1, "expected 1 call for cluster1"); }}